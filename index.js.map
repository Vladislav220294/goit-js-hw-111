{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createImageTemplate = imageInfo => {\n    return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${imageInfo.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${imageInfo.previewURL}\"\n      alt=\"${imageInfo.tags}\"\n    />\n    <div class=\"gallery-image-description\">\n              <p>Likes: ${imageInfo.likes}</p>\n              <p>Views: ${imageInfo.views}</p>\n              <p>Comments: ${imageInfo.comments}</p>\n              <p>Downloads: ${imageInfo.downloads}</p>\n          </div>\n  </a>\n</li>\n`\n};","import axios from 'axios'\nconst baseUrl = 'https://pixabay.com/api/';\n\nexport const fetchImages = (searchedQuery, currentPage) => {\n//   const axiosOptions = {\n//     params: {\n//       q: searchedQuery,\n//       page: 1,\n//       per_page: 15,\n//       image_type: photo,   \n//       orientation: horizontal,\n//       safesearch : true,\n      \n// }\n//   };\n  return axios.get(`${baseUrl}?&key=25284590-6d373146c28d5b297cc6c7db9&q=${searchedQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=15`);\n  \n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { createImageTemplate } from \"./js/render-functions\";\nimport { fetchImages } from \"./js/pixabay-api\";\n\nconst searchFormEl = document.querySelector('.feedback-form');\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreBtnEl = document.querySelector('.load-more-btn')\nconst loader = document.querySelector('.loader');\nloader.style.display = 'none';\nlet page = 1;\nlet searchedQuery = '';\nconst lightbox = new SimpleLightbox('.gallery a');\n\n\nconst onSearchFormSubmit = async event => {\n  try {galleryEl.innerHTML = '';\n    event.preventDefault();\n     searchedQuery = event.currentTarget.elements.text.value.trim();\n    if (searchedQuery === '') {\n      loadMoreBtnEl.classList.add('is-hidden');\n      loadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n        iziToast.error({\n        title: 'Error',\n        message: \"Please, enter the name!\",\n        });\n        galleryEl.innerHTML = '';\n        searchFormEl.reset();\n        loader.style.display = 'none';\n        return;\n    }\n    loader.style.display = 'flex';\n    page = 1;\n    loadMoreBtnEl.classList.add('is-hidden');\n    const { data } = await fetchImages(searchedQuery, page);\n    console.log(data)\n    if (data.hits.length === 0) {\n            iziToast.error({\n        title: 'Error',\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n      });\n            galleryEl.innerHTML = '';\n      searchFormEl.reset();\n      \n      loadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n            loader.style.display = 'none';\n            return;\n    }\n    if (page * 15 < data.totalHits) { \n      loadMoreBtnEl.classList.remove('is-hidden');\n      loadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick)\n    };\n        const galleryTemplate = data.hits.map(el => createImageTemplate(el)).join('');\n        \n    galleryEl.innerHTML = galleryTemplate; \n    \n    \n        searchFormEl.reset();\n        lightbox.refresh();\n    loader.style.display = 'none';\n    // loadMoreBtnEl.classList.remove('is-hidden');\n    // loadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick)\n  }\n  catch (error) { \n          iziToast.error({\n        title: 'Error',\n        message: \"Error\",\n      });\n       };\n    \n    \n}\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\nfunction scroll() {\n  const gallery = document.querySelector('.gallery');\n        const { height: cardHeight } = gallery.getBoundingClientRect();\n  \n    window.scrollBy({\n      top: cardHeight * 3,\n      behavior: 'smooth',\n    });\n  }\n\nconst  onLoadMoreBtnClick = async event => {\n  try { \n    loader.style.display = 'flex';\n    page++;\n    const { data } = await fetchImages(searchedQuery, page);\n    const galleryTemplate = data.hits.map(el => createImageTemplate(el)).join('');\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n    scroll();\n    loader.style.display = 'none';\n    lightbox.refresh();\n    \n    if (page * 15 >= data.totalHits || data.hits.length < 15 ) {\n    loadMoreBtnEl.classList.add('is-hidden');\n      loadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n      iziToast.info({\n          title: 'End of results',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n  }\n  }\n  \n  catch (error) {\n\n          iziToast.error({\n        title: 'Error',\n        message: \"Error\",\n      });\n      \n  }\n}"],"names":["createImageTemplate","imageInfo","baseUrl","fetchImages","searchedQuery","currentPage","axios","searchFormEl","galleryEl","loadMoreBtnEl","loader","page","lightbox","SimpleLightbox","onSearchFormSubmit","event","onLoadMoreBtnClick","iziToast","data","galleryTemplate","el","scroll","gallery","cardHeight"],"mappings":"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"}